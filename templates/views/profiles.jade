extends ../layouts/default_ng

//- mixin profile(profile)
//-   - thisIsMine = user && (profile.user.id === user.id)
//-   .profile(class={"my-profile": thisIsMine} data-ks-editable=editable(user, { list: 'profile', id: profile.id }))
//-     .profile-header
//-       h2: a(href='/profiles/profile/' + profile.slug)= profile.name
//-       //- p.lead.text-muted Owned by
//-       p.lead.text-muted
//-         if profile.user
//-           //- | Owned by
//-           //- a(href="/users/#{profile.user.id}") #{profile.user.name.full}
//-           a(href="/profiles/profile/#{profile.slug}") #{thisIsMine ? "Me" : profile.userName}
//-     .profile-body
//-       if profile.avatar.exists
//-         //- img(src=profile._.image.fit(160,160)).img.pull-right
//-         img(src=profile._.avatar.fit(100,100)).img.pull-right
//-       p!= profile.about.brief
//-       if profile.about.extended
//-         p.read-more: a(href='/profiles/profile/' + profile.slug) Read more...

block intro
  .container: .row
    .col-sm-4.col-md-4
      h1= data.category ? data.category.name : 'User Profiles'
    .col-sm-3.col-sm-offset-5.col-md-3.col-md-offset-5
      if user && user.profile
        //- if user.profile.public?
        if true
          a.btn.btn-primary(href="/profiles/show/#{user.id}") Go to my Profile
        else
          a.btn.btn-primary(href="/profiles/show/#{user.id}") Edit my Profile
      else
        a.btn.btn-primary(href="/profiles/new") Create my profile

block content
  .container(ng-app="dollhouse"): .row.jumbotron(ng-view="")
  //- .container(ng-app="dollhouse" ng-controller="ProfilesController"): .row.jumbotron(ng-view="")
